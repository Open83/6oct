<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Saraaaa ‚Äî Classic Gift (Envelope + Wheel)</title>
<style>
  :root{
    --bg1:#f3f5f9; --card:#ffffff;
    --accent:#c0392b; /* red seal */
    --gold:#c9a14a;
    --muted:#6b6f76;
    --paper:#fffaf6;
    --maxw:980px;
    --ease-std: cubic-bezier(.18,.9,.3,1);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Roboto, Arial; background:linear-gradient(180deg,#f2f6fa 0%, #eef3f8 100%); color:#222}
  .wrap{max-width:var(--maxw);margin:18px auto;padding:16px}
  .panel{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 10px 30px rgba(30,40,50,0.06);border:1px solid rgba(10,10,10,0.03)}
  header.top{display:flex;gap:12px;align-items:center;margin-bottom:12px}
  h1{font-size:20px;margin:0}
  p.lead{margin:0;color:var(--muted);font-weight:600}

  /* grid menu */
  .menu-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  @media(max-width:640px){ .menu-grid{grid-template-columns:1fr} }

  .card{padding:14px;border-radius:10px;background:linear-gradient(180deg,rgba(0,0,0,0.01),rgba(0,0,0,0.01));cursor:pointer;display:flex;align-items:center;gap:12px;transition:transform .22s var(--ease-std), box-shadow .22s}
  .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(30,40,50,0.07)}
  .card .icon{font-size:28px}
  .muted{color:var(--muted);font-size:13px}

  /* Screen system */
  .screen{display:none}
  .screen.active{display:block}
  .top-actions{margin-left:auto}

  /* Envelope scene (classic paper style) */
  .env-area{display:flex;align-items:center;justify-content:center;padding:26px 0}
  .env-scene{width:min(86vw,420px);height:calc(min(86vw,420px) * 0.62);position:relative;perspective:1200px}
  /* Envelope wrapper (for depth) */
  .envelope-wrap{position:relative;width:100%;height:100%}
  /* base envelope (pocket) */
  .env-pocket{
    position:absolute;left:0;right:0;bottom:0;top:10%;
    border-radius:10px;background:linear-gradient(180deg,#fffafa,#fff6f0);
    border:1px solid rgba(0,0,0,0.06);box-shadow:inset 0 2px 0 rgba(0,0,0,0.03), 0 12px 30px rgba(0,0,0,0.06);
    overflow:hidden;display:flex;align-items:flex-start;justify-content:center;padding-top:14%;
  }
  /* flap (top) - is separate and rotates up around top edge */
  .env-flap{
    position:absolute;left:0;right:0;top:0;height:54%;
    background:linear-gradient(180deg,#fff2f0,#ffecec);
    border-top-left-radius:10px;border-top-right-radius:10px;
    transform-origin:center top; transform: rotateX(0deg) translateZ(40px);
    box-shadow:0 12px 30px rgba(0,0,0,0.08);
    transition: transform .9s var(--ease-std);
    z-index:8;
  }
  .env-seal{
    position:absolute;left:50%;transform:translateX(-50%);top:44%;
    width:58px;height:58px;border-radius:50%;background:linear-gradient(180deg,var(--accent),#8e1d1b);
    display:flex;align-items:center;justify-content:center;color:white;font-weight:900;z-index:9;
    box-shadow:0 8px 28px rgba(192,57,43,0.24);
  }

  /* letter sheet sits inside pocket initially hidden */
  .letter{
    position:absolute;left:8%;right:8%;top:18%;height:58%;
    background:linear-gradient(180deg,var(--paper),#fffaf0);border-radius:6px;padding:14px;
    box-shadow:0 20px 50px rgba(20,30,40,0.08);transform-origin:center bottom;
    transform: translateY(22px) scale(0.98);opacity:0;
    transition: transform .55s var(--ease-std), opacity .45s var(--ease-std), box-shadow .3s;
    z-index:6;
  }

  /* When open: flap rotates up, letter is visible and lifted a bit */
  .env-open .env-flap{ transform: rotateX(-170deg) translateZ(40px); }
  .env-open .letter{ transform: translateY(-8%) scale(1); opacity:1; box-shadow:0 30px 80px rgba(20,30,40,0.12) }

  /* Fold animation on close: compress letter slightly and move down to pocket */
  .letter.fold-into{ transition: transform .5s cubic-bezier(.35,.8,.18,1), opacity .4s .12s; transform: translateY(18px) scaleY(.8) translateZ(0); opacity:0; }

  /* header buttons */
  .row{display:flex;align-items:center;gap:12px}
  .btn{background:linear-gradient(90deg,#5b8df7,#6bc1ff);border:none;padding:10px 14px;border-radius:10px;color:white;font-weight:800;cursor:pointer;box-shadow:0 10px 28px rgba(88,140,255,0.12)}
  .btn.ghost{background:transparent;border:1px solid rgba(0,0,0,0.06);color:#222}

  /* Close button in letter view */
  .close-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
  .close-small{background:#fff;border-radius:8px;padding:8px 10px;border:1px solid rgba(0,0,0,0.05);cursor:pointer}

  /* MOMENTS flips (elegant) */
  .moments-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  @media (max-width:640px){ .moments-grid{grid-template-columns:1fr} }
  .flip-card{height:150px;perspective:1000px}
  .flip-inner{position:relative;width:100%;height:100%;transition:transform .48s var(--ease-std);transform-style:preserve-3d;border-radius:10px;overflow:hidden;box-shadow:0 12px 34px rgba(0,0,0,0.06)}
  .flip-front,.flip-back{position:absolute;inset:0;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;padding:12px}
  .flip-front{background:linear-gradient(180deg,#fff,#faf8f6);font-weight:800}
  .flip-back{background:#fff;transform:rotateY(180deg);color:#222;font-weight:700}
  .flip-inner.flipped{transform:rotateY(180deg)}

  /* Playlist */
  .song{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfbfb);border:1px solid rgba(0,0,0,0.03)}

  /* Wheel: classic look */
  .wheel-wrap{display:flex;flex-direction:column;align-items:center;gap:8px;padding:12px}
  canvas.wheel{width:min(86vw,420px);height:auto;border-radius:50%}
  .wheel-pointer{width:0;height:0;border-left:18px solid transparent;border-right:18px solid transparent;border-bottom:30px solid #fff;filter:drop-shadow(0 8px 20px rgba(0,0,0,0.12));margin-bottom:-10px}
  .spin-controls{display:flex;gap:10px;align-items:center}

  /* result modal */
  .result{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);min-width:260px;background:#fff;border-radius:10px;padding:16px;box-shadow:0 30px 90px rgba(0,0,0,0.2);display:none;z-index:120}
  .result.show{display:block}
  .result h3{margin:0 0 6px 0}

  /* small */
  .small-muted{font-size:13px;color:var(--muted)}
  footer{margin-top:16px;text-align:center;color:var(--muted);font-size:13px}
</style>
</head>
<body>
  <div class="wrap">

    <!-- MENU -->
    <div id="menuScreen" class="screen active">
      <div class="panel">
        <div class="row">
          <div><h1>For Saraaaa ‚ù§Ô∏è</h1><p class="lead">A classic little gift ‚Äî open it and enjoy</p></div>
          <div style="flex:1"></div>
          <div class="top-actions"><button class="btn ghost" onclick="openScreen('menuScreen')">Home</button></div>
        </div>

        <div style="margin-top:12px" class="menu-grid">
          <div class="card" onclick="openScreen('letterScreen')"><div class="icon">üíå</div><div><strong>Love Letter</strong><div class="muted">Classic envelope</div></div></div>
          <div class="card" onclick="openScreen('momentsScreen')"><div class="icon">‚ú®</div><div><strong>Moments</strong><div class="muted">Flip & read</div></div></div>
          <div class="card" onclick="openScreen('playlistScreen')"><div class="icon">üéµ</div><div><strong>Playlist</strong><div class="muted">Music for you</div></div></div>
          <div class="card" onclick="openScreen('gameScreen')"><div class="icon">üé°</div><div><strong>Spin the Wheel</strong><div class="muted">Classic & elegant</div></div></div>
        </div>
      </div>
    </div>

    <!-- LETTER SCREEN -->
    <div id="letterScreen" class="screen">
      <div class="panel">
        <div class="close-row">
          <div><h1>Love Letter</h1><div class="small-muted">Tap the envelope to open</div></div>
          <div>
            <button class="close-small" id="letterCloseBtn">Back</button>
          </div>
        </div>

        <div class="env-area">
          <div class="env-scene" aria-hidden="false">
            <div class="envelope-wrap" id="envelopeWrap">
              <div class="env-pocket" id="envPocket" aria-hidden="false"></div>

              <div class="env-flap" id="envFlap" aria-hidden="true"></div>

              <div class="env-seal" id="envSeal" aria-hidden="false">‚ù§</div>

              <div class="letter" id="letter" role="article" aria-hidden="true">
                <div style="font-weight:900;margin-bottom:8px">Meri Bacchiii ‚ô•Ô∏è</div>
                <div style="color:#333;line-height:1.55;white-space:pre-wrap;font-size:14px">
Saraaaa‚ô•Ô∏è
Kal raat jo hua uske baare mein main soch raha tha aur mujhe yeh feel hua ki main bhi galat tha. Tumne aaj call karke sorry bola lekin mujhe bhi sorry kehna hai; shayad main thoda zyada rude ho gaya tha jab mujhe bas shant rehna chahiye tha. Mujhe tumse ladna pasand nahi hai kyunki har baar jab hum door hote hain lagta hai jaise kuch adhura ho gaya ho.

Tum waise hi rare ho ‚Äî tumhari aankhon ka sukoon, tumhare alfaaz ka warmth. Main seriously blessed hoon. I Lykeeeeee Uuuuu Meri Jaannnn ‚ù§Ô∏è
                </div>
                <div style="text-align:right;margin-top:10px;color:#444;font-weight:700">‚Äî Sayed Asif</div>
              </div>

            </div>
          </div>
        </div>

        <div style="display:flex;gap:10px;justify-content:center;margin-top:12px">
          <button class="btn" id="openBtn">Open</button>
          <button class="btn ghost" id="closeBtn">Close</button>
        </div>
      </div>
    </div>

    <!-- MOMENTS -->
    <div id="momentsScreen" class="screen">
      <div class="panel">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
          <button class="close-small" onclick="openScreen('menuScreen')">Back</button>
          <div><h1>Special Moments</h1><div class="small-muted">Tap to flip</div></div>
        </div>

        <div class="moments-grid">
          <div class="flip-card">
            <div class="flip-inner" tabindex="0">
              <div class="flip-front">üò∏ <div style="font-weight:800;margin-top:8px">Tumhra naam hi sukoon</div></div>
              <div class="flip-back">Jab bhi tumhara naam leta hoon na Saraaaa, dil ko sukoon milta hai...</div>
            </div>
          </div>
          <div class="flip-card">
            <div class="flip-inner" tabindex="0">
              <div class="flip-front">üòª <div style="font-weight:800;margin-top:8px">Tumhre bina adhoora</div></div>
              <div class="flip-back">Tumhare bina sab adhoora lagta hai...</div>
            </div>
          </div>
          <div class="flip-card">
            <div class="flip-inner" tabindex="0">
              <div class="flip-front">üòΩ <div style="font-weight:800;margin-top:8px">Touch mein jaadu</div></div>
              <div class="flip-back">Jab tumhara haath mere haath mein aata hai, sab theek lagta hai.</div>
            </div>
          </div>
          <div class="flip-card">
            <div class="flip-inner" tabindex="0">
              <div class="flip-front">üê± <div style="font-weight:800;margin-top:8px">Tu meri aadat</div></div>
              <div class="flip-back">Har din tum meri aadat banti ja rahi ho ‚Äî namumkin chhode paana.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- PLAYLIST -->
    <div id="playlistScreen" class="screen">
      <div class="panel">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
          <button class="close-small" onclick="openScreen('menuScreen')">Back</button>
          <div><h1>Playlist</h1><div class="small-muted">Songs for you</div></div>
        </div>

        <div style="margin-top:10px">
          <div class="song"><div style="width:56px;height:56px;border-radius:8px;background:linear-gradient(90deg,#f39c9c,#f6b6b6);display:grid;place-items:center">üéß</div><div><div style="font-weight:900">Shiddat</div><div class="muted">Saraaaa ‚ô•Ô∏è</div></div></div>

          <div style="margin-top:12px">
            <iframe width="100%" height="88" style="border-radius:8px;border:none" src="https://www.youtube.com/embed/iSo9l950QLo?si=zrDGjksZnXu4rE83" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
        </div>
      </div>
    </div>

    <!-- GAME: CLASSIC SPIN WHEEL -->
    <div id="gameScreen" class="screen">
      <div class="panel">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
          <button class="close-small" onclick="openScreen('menuScreen')">Back</button>
          <div><h1>Spin the Wheel</h1><div class="small-muted">Classic & elegant</div></div>
        </div>

        <div class="wheel-wrap">
          <div class="wheel-pointer" aria-hidden="true"></div>
          <canvas id="wheelCanvas" class="wheel" width="680" height="680"></canvas>
          <div class="spin-controls">
            <button class="btn" id="spin">SPIN</button>
            <button class="btn ghost" id="spinQuick">QUICK</button>
          </div>
          <div class="small-muted">Tap SPIN and wait ‚Äî the wheel slows naturally.</div>
        </div>
      </div>
    </div>

    <div id="resultModal" class="result" role="dialog" aria-modal="true" aria-hidden="true">
      <h3 id="resTitle"></h3>
      <div id="resType" class="small-muted" style="margin-bottom:12px"></div>
      <div style="display:flex;gap:8px;justify-content:center"><button class="btn" id="resOk">OK</button></div>
    </div>

    <footer class="muted" style="margin-top:16px">Made with ‚ù§Ô∏è</footer>
  </div>

<script>
/* ---------------- Navigation ---------------- */
function openScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  // reset letter visuals when entering letter screen
  if(id === 'letterScreen') resetEnvelopeInstant();
}
document.querySelectorAll('.card').forEach(c=>c.addEventListener('keydown', e=>{ if(e.key==='Enter') c.click(); }));

/* --------------- Envelope Animation Logic -------------- */
/* Approach:
   - Envelope is closed initially.
   - Clicking Open toggles env-open class on wrapper.
   - Show letter by changing transform/opacity.
   - On Close: animate letter "fold-into" (compress + move down + fade) then remove env-open.
*/
const envelopeWrap = document.getElementById('envelopeWrap');
const envFlap = document.getElementById('envFlap');
const letter = document.getElementById('letter');
const envSeal = document.getElementById('envSeal');
const openBtn = document.getElementById('openBtn');
const closeBtn = document.getElementById('closeBtn');
const letterCloseBtn = document.getElementById('letterCloseBtn');

let envOpen = false;
let envBusy = false;

function openEnvelope(){
  if(envBusy || envOpen) return;
  envBusy = true;
  // lift flap
  envelopeWrap.classList.add('env-open');
  envFlap.setAttribute('aria-hidden','false');
  // small delay then reveal letter sliding up
  setTimeout(()=>{
    letter.setAttribute('aria-hidden','false');
    // ensure remove any fold class
    letter.classList.remove('fold-into');
    envOpen = true;
    envBusy = false;
  }, 260);
}
function closeEnvelope(){
  if(envBusy || !envOpen){
    // if not open just go back
    envelopeWrap.classList.remove('env-open');
    letter.setAttribute('aria-hidden','true');
    envOpen = false;
    return;
  }
  envBusy = true;
  // animate fold: shrink vertically and fade out, then close flap
  letter.classList.add('fold-into');
  setTimeout(()=>{
    // after fold animation, hide letter and close flap
    letter.setAttribute('aria-hidden','true');
    envelopeWrap.classList.remove('env-open');
    setTimeout(()=>{
      letter.classList.remove('fold-into');
      envOpen = false;
      envBusy = false;
    }, 220);
  }, 420);
}

/* click handlers - envelope area clickable too */
const envScene = document.querySelector('.env-scene');
envScene.addEventListener('click', (e)=>{
  // if click target is control buttons, ignore
  const tgt = e.target;
  if(tgt === openBtn || tgt === closeBtn || tgt === letterCloseBtn) return;
  if(!envOpen) openEnvelope(); else closeEnvelope();
});

openBtn.addEventListener('click', ()=> openEnvelope());
closeBtn.addEventListener('click', ()=> closeEnvelope());
letterCloseBtn.addEventListener('click', ()=> { if(envOpen) closeEnvelope(); else openScreen('menuScreen'); });

/* Accessibility keyboard (Enter/Space toggles) */
envScene.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); envScene.click(); }
});

/* --------------- Flip cards simple interactions --------------- */
document.querySelectorAll('.flip-inner').forEach(inner=>{
  inner.addEventListener('click', ()=> inner.classList.toggle('flipped'));
  inner.addEventListener('keydown', (e)=> { if(e.key==='Enter') inner.classList.toggle('flipped'); });
});

/* -------------------- Classic Spin Wheel -------------------- */
/* Canvas wheel with gold rim and refined easing. */
const canvas = document.getElementById('wheelCanvas');
const ctx = canvas.getContext('2d', {alpha:true});
let size = Math.min(window.innerWidth * 0.86, 680);
function resizeCanvas(){
  size = Math.min(window.innerWidth * 0.86, 680);
  canvas.style.width = size + 'px';
  canvas.style.height = size + 'px';
  const DPR = window.devicePixelRatio || 1;
  canvas.width = Math.round(size * DPR);
  canvas.height = Math.round(size * DPR);
  ctx.setTransform(DPR,0,0,DPR,0,0);
  drawWheel(currentRotation || 0);
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

/* wheel items */
const items = [
  {text:"Tender Kiss", type:"Romantic"},
  {text:"Sing 1 line", type:"Cute"},
  {text:"Compliment her", type:"Romantic"},
  {text:"Slow dance 30s", type:"Cute"},
  {text:"Long Hug", type:"Romantic"},
  {text:"Share memory", type:"Cute"},
  {text:"Cook favorite", type:"Romantic"},
  {text:"Whisper a secret", type:"Cute"},
  {text:"Write a note", type:"Romantic"},
  {text:"Send silly selfie", type:"Cute"},
  {text:"Promise a date", type:"Romantic"},
  {text:"Do 10 squats", type:"Cute"}
];
const n = items.length;
const slice = (2*Math.PI)/n;
const palette = ['#f7efe6','#fff6f0','#fff2e9','#fef7f6','#fff8f2','#fff6f3'];

/* draw wheel at rotation (radians) */
function drawWheel(rot){
  const w = size, h = size, cx = w/2, cy = w/2, rOut = w/2 - 6;
  ctx.clearRect(0,0,w,w);
  ctx.save();
  ctx.translate(cx,cy);
  ctx.rotate(rot);
  for(let i=0;i<n;i++){
    const a = i * slice;
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.arc(0,0,rOut,a,a+slice);
    ctx.closePath();
    ctx.fillStyle = palette[i % palette.length];
    ctx.fill();
    ctx.strokeStyle = '#eee';
    ctx.lineWidth = 1;
    ctx.stroke();

    // text
    ctx.save();
    ctx.rotate(a + slice/2);
    ctx.fillStyle = '#222';
    ctx.font = "700 13px Inter, Arial";
    ctx.textAlign = "right";
    const txt = items[i].text;
    // simple wrap if long
    ctx.fillText(txt, rOut - 12, 6);
    ctx.restore();
  }
  // gold rim
  ctx.beginPath(); ctx.arc(0,0,rOut + 4,0,2*Math.PI); ctx.lineWidth = 10; ctx.strokeStyle = 'rgba(201,161,74,0.95)'; ctx.stroke();
  // center
  ctx.beginPath(); ctx.arc(0,0,36,0,2*Math.PI); ctx.fillStyle = '#fff'; ctx.fill();
  ctx.fillStyle = '#222'; ctx.font = "700 18px Inter, Arial"; ctx.textAlign='center'; ctx.fillText('‚ù§',0,6);
  ctx.restore();
}

/* spin mechanics */
let currentRotation = 0;
let spinning = false;
const spinBtn = document.getElementById('spin');
const quickBtn = document.getElementById('spinQuick');
const resultModal = document.getElementById('resultModal');
const resTitle = document.getElementById('resTitle');
const resType = document.getElementById('resType');
const resOk = document.getElementById('resOk');

function easeOut(t){ return 1 - Math.pow(1 - t, 3); }

function spin(quick=false){
  if(spinning) return;
  spinning = true;
  // random target index
  const targetIndex = Math.floor(Math.random() * n);
  const full = (Math.PI*2) * (3 + Math.floor(Math.random()*3)); // 3..5 spins
  const sliceCenter = targetIndex * slice + slice/2;
  // target rotation such that sliceCenter lands at top ( -PI/2 )
  const desired = -Math.PI/2 - sliceCenter;
  const start = currentRotation;
  // add full spins + move to desired
  let end = start + full + (desired - (start % (2*Math.PI)));
  // small randomness
  end += (Math.random() - 0.5) * (slice * 0.3);

  const duration = quick ? 900 : (2200 + Math.random()*1200);
  const t0 = performance.now();
  (function raf(now){
    const elapsed = now - t0;
    const p = Math.min(1, elapsed / duration);
    const eased = easeOut(p);
    currentRotation = start + (end - start) * eased;
    drawWheel(currentRotation);
    // pointer wobble visual
    const pointer = document.querySelector('.wheel-pointer');
    if(pointer) pointer.style.transform = `rotate(${Math.sin(elapsed/140) * 6}deg)`;
    if(p < 1) requestAnimationFrame(raf); else {
      spinning = false;
      pointer.style.transform = 'rotate(0deg)';
      showSpinResult();
    }
  })(performance.now());
}

/* determine result and show modal */
function showSpinResult(){
  // normalize rotation
  const norm = (currentRotation % (2*Math.PI) + 2*Math.PI) % (2*Math.PI);
  const pointerAngle = (3*Math.PI/2 - norm + 2*Math.PI) % (2*Math.PI); // pointer at top
  let idx = Math.floor(pointerAngle / slice) % n;
  idx = (idx + n) % n;
  const it = items[idx];
  resTitle.textContent = it.text;
  resType.textContent = it.type === 'Romantic' ? 'Romantic surprise' : 'Cute dare';
  resultModal.classList.add('show');
  resultModal.setAttribute('aria-hidden','false');
}

/* events */
spinBtn.addEventListener('click', ()=> spin(false));
quickBtn.addEventListener('click', ()=> spin(true));
resOk.addEventListener('click', ()=> { resultModal.classList.remove('show'); resultModal.setAttribute('aria-hidden','true'); });

/* initial draw */
drawWheel(currentRotation);

/* resize handling */
window.addEventListener('resize', ()=> { resizeCanvas(); });

/* small touch prevention */
let lastTap = 0;
document.body.addEventListener('touchend', (e)=>{
  const now = Date.now();
  if(now - lastTap < 220) e.preventDefault();
  lastTap = now;
}, {passive:true});
</script>
</body>
</html>
