<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Drag Papers ‚ù§Ô∏è</title>
  <link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Zeyada&display=swap'>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: 'Zeyada', cursive;
      min-height:100vh;display:flex;align-items:center;justify-content:center;
      background-image: url("https://www.psdgraphics.com/wp-content/uploads/2022/01/white-math-paper-texture.jpg");
      background-position:center center;background-size:cover;overflow:hidden;touch-action:none;
    }

    .scene{position:relative;width:100%;max-width:1100px;height:86vh;margin:0 auto;}

    .paper{
      position:absolute;left:0;top:0;
      padding:20px 60px;background-image:url('https://i0.wp.com/textures.world/wp-content/uploads/2018/10/2-Millimeter-Paper-Background-copy.jpg?ssl=1');
      background-size:500px;background-position:center;border-radius:8px;cursor:grab;user-select:none;
      box-shadow:1px 15px 20px rgba(0,0,0,0.45);transition:box-shadow .22s ease, transform .22s ease, opacity .45s ease;
      will-change:transform,opacity;
    }
    .paper:active{cursor:grabbing}

    /* breathing subtle animation */
    .breathe{animation:breathe 5.8s ease-in-out infinite}
    @keyframes breathe{0%{transform:scale(1) rotateZ(var(--rot,0deg))}50%{transform:scale(1.02) rotateZ(calc(var(--rot,0deg) + 0.25deg));box-shadow:0 28px 56px rgba(255,110,140,0.06)}100%{transform:scale(1) rotateZ(var(--rot,0deg))}}

    .paper.heart{width:140px;height:140px;padding:0;border-radius:50%;position:absolute}
    .paper.heart::after{content:'';position:absolute;inset:0;background-image:url('https://cdn.pixabay.com/photo/2016/03/31/19/25/cartoon-1294994__340.png');background-repeat:no-repeat;background-position:center;background-size:110px;opacity:.6;pointer-events:none}

    .paper.image{padding:14px;max-width:300px}
    img{width:100%;height:auto;border-radius:8px;display:block;margin-top:10px;-webkit-user-drag:none}

    p{font-size:34px;color:rgb(10,20,80);opacity:.9;text-align:center;margin:6px 0}

    .secretText{position:absolute;left:12px;right:12px;bottom:10px;font-size:18px;color:rgba(160,30,80,0);text-align:center;transition:color .45s ease,transform .45s ease,opacity .45s ease;opacity:0;pointer-events:none}
    .secretText.show{color:rgba(160,30,80,1);transform:translateY(-6px);opacity:1;text-shadow:0 6px 18px rgba(255,140,170,0.12)}

    /* final overlay */
    .finalOverlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none;opacity:0;transition:opacity .5s ease;z-index:10002}
    .finalOverlay.show{opacity:1;pointer-events:auto}
    .finalCard{background:rgba(255,255,255,0.96);padding:28px;border-radius:14px;box-shadow:0 20px 60px rgba(0,0,0,0.25);text-align:center;max-width:94vw}
    .finalCard h1{font-size:44px;margin-bottom:6px}
    .finalCard p{font-size:18px;margin-bottom:14px}
    .finalCard button{background:#ff6b92;color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer}

    canvas.particles{position:fixed;inset:0;pointer-events:none;z-index:10001}

    /* responsive tweaks */
    @media (max-width:768px){ .paper{padding:12px 30px;max-width:80vw} p{font-size:26px} .secretText{font-size:15px} .paper.heart{width:110px;height:110px} }
    @media (max-width:480px){ .paper{padding:10px 22px;max-width:92vw} p{font-size:20px} }
  </style>
</head>
<body>
  <div class="scene" id="scene">
    <!-- keep same papers & images exactly as your original -->
    <div class="paper" id="lastPaper"><p class="p1">Drop me to seeehhh what happen's!</p></div>

    <div class="paper heart breathe" id="heartPaper"></div>

    <div class="paper image breathe">
      <p>and I fallen in</p>
      <p>Love with You üòç</p>
      <img src="images/1.jpeg" alt="Love" />
      <div class="secretText" data-text="My secret: you are my peace."></div>
    </div>

    <div class="paper image breathe">
      <p>See how beautiful</p>
      <p>We look together</p>
      <img src="images/2.jpeg" alt="Moment" />
      <div class="secretText" data-text="My secret: I dream of forever with you."></div>
    </div>

    <div class="paper image breathe">
      <p>Couple goals‚ù§Ô∏è</p>
      <img src="images/3.jpeg" alt="Cute" />
      <div class="secretText" data-text="My secret: your laugh is my favorite song."></div>
    </div>

    <div class="paper image breathe">
      <p>How can be</p>
      <p>someone so cute ‚ù§Ô∏è</p>
      <img src="images/4.jpeg" alt="Cute" />
      <div class="secretText" data-text="My secret: I get lost in your eyes."></div>
    </div>

    <div class="paper image breathe">
      <p>Meri Jaaaaaaaaaannnn‚ù§Ô∏è</p>
      <img src="images/5.jpeg" alt="Cute" />
      <div class="secretText" data-text="My secret: you make every day brighter."></div>
    </div>

    <div class="paper image breathe">
      <p>Apka Shohar‚ù§Ô∏è</p>
      <img src="images/6.jpeg" alt="Cute" />
      <div class="secretText" data-text="My secret: I want to grow old with you."></div>
    </div>

    <div class="paper red breathe">
      <p class="p1">and My Favorite</p>
      <p class="p2">Person üòç</p>
      <div class="secretText" data-text="My secret: every heartbeat is for you."></div>
    </div>

    <div class="paper breathe">
      <p class="p1">Meri Pyriiii</p>
      <p class="p1"> Saraaaaaaaaa‚ù§Ô∏è<span style="color: red !important">‚ù§Ô∏è</span></p>
      <div class="secretText" data-text="My secret: say yes to forever with me."></div>
    </div>

  </div>

  <!-- particles + final overlay -->
  <canvas class="particles" id="particleCanvas"></canvas>
  <div class="finalOverlay" id="finalOverlay">
    <div class="finalCard">
      <h1 id="finalTitle">I Love You Saraaaa‚ù§Ô∏è</h1>
      <p id="finalSub">You are my rarest magic ‚Äî forever and always.</p>
      <button id="goBackBtn">Go Back</button>
    </div>
  </div>

  <script>
    // ====== Utilities and setup ======
    const scene = document.getElementById('scene');
    const papers = Array.from(scene.querySelectorAll('.paper'));
    const particleCanvas = document.getElementById('particleCanvas');
    const pctx = particleCanvas.getContext('2d');
    let W = innerWidth, H = innerHeight;
    function fit(){ W = innerWidth; H = innerHeight; particleCanvas.width = W; particleCanvas.height = H; }
    fit(); window.addEventListener('resize', fit);

    // small webaudio feedback
    const AudioCtx = window.AudioContext || window.webkitAudioContext; const A = new AudioCtx();
    function tapTone(){ try{ const o=A.createOscillator(); const g=A.createGain(); o.type='sine'; o.frequency.value=540; g.gain.value=0.02; o.connect(g); g.connect(A.destination); o.start(); g.gain.exponentialRampToValueAtTime(0.0001,A.currentTime+0.12); o.stop(A.currentTime+0.14);}catch(e){} }
    document.addEventListener('pointerdown', ()=>{ if(A.state === 'suspended') A.resume(); }, {once:true});

    // particles (floating hearts)
    const particles = [];
    function spawnHeart(x,y){ particles.push({x,y,vx:(Math.random()-0.5)*0.9,vy:-1.6+Math.random()*-0.4,life:110,size:6+Math.random()*6,alpha:1}); }
    function drawHeart(c,x,y,s){ c.beginPath(); const top = y - s*0.4; c.moveTo(x, top + s/2); c.bezierCurveTo(x + s, top - s/2, x + s*1.6, top + s/1.2, x, top + s*1.8); c.bezierCurveTo(x - s*1.6, top + s/1.2, x - s, top - s/2, x, top + s/2); c.fillStyle = 'rgba(255,110,140,0.95)'; c.fill(); }
    function particlesLoop(){ pctx.clearRect(0,0,W,H); for(let i=particles.length-1;i>=0;i--){ const p = particles[i]; p.x += p.vx; p.y += p.vy; p.life--; p.alpha = p.life/110; pctx.save(); pctx.globalAlpha = p.alpha; drawHeart(pctx,p.x,p.y,p.size); pctx.restore(); if(p.life<=0) particles.splice(i,1); } requestAnimationFrame(particlesLoop); }
    requestAnimationFrame(particlesLoop);

    // place papers centered and stacked (preserve their order/content)
    function placePapers(){ const rect = scene.getBoundingClientRect(); const centerX = rect.width/2; const centerY = rect.height/2; const spacing = 18; const spread = Math.min(140, Math.floor(papers.length*12));
      papers.forEach((p,i)=>{
        const mid = (papers.length-1)/2; const idx = i - mid; // negative left, positive right
        const pw = p.offsetWidth || 280; const ph = p.offsetHeight || 180;
        const left = Math.round(centerX - pw/2 + idx*spacing + (Math.random()-0.5)*10);
        const top = Math.round(centerY - ph/2 + Math.abs(idx)*8 + (Math.random()-0.5)*8);
        p.style.left = left + 'px'; p.style.top = top + 'px';
        const rot = (Math.random()*18 - 9).toFixed(2) + 'deg'; p.style.setProperty('--rot', rot); p.style.transform = `translate3d(0px,0px,0) rotateZ(${rot})`;
        // store initial state
        p.dataset.initLeft = left; p.dataset.initTop = top; p.dataset.tx = 0; p.dataset.ty = 0; p.dataset.rot = rot;
      });
    }

    // call after images/layout loaded
    window.addEventListener('load', ()=>{ placePapers(); });

    // prevent scroll on touch
    document.body.addEventListener('touchmove', e=>{ e.preventDefault(); }, {passive:false});

    // Dragging with pointer events, pointer capture, and long-press reveal
    class Dragger{
      constructor(el){ this.el = el; this.pointerId = null; this.startX = 0; this.startY = 0; this.startTx = 0; this.startTy = 0; this.isDown = false; this.hasMoved=false; this.longPressTimer=null; this.init(); }
      init(){
        this.el.addEventListener('pointerdown', this.down.bind(this));
        this.el.addEventListener('pointermove', this.move.bind(this));
        this.el.addEventListener('pointerup', this.up.bind(this));
        this.el.addEventListener('pointercancel', this.up.bind(this));
        this.el.addEventListener('lostpointercapture', this.up.bind(this));
      }
      down(e){ e.preventDefault(); this.el.setPointerCapture(e.pointerId); this.pointerId = e.pointerId; this.isDown = true; this.startX = e.clientX; this.startY = e.clientY; this.startTx = parseFloat(this.el.dataset.tx) || 0; this.startTy = parseFloat(this.el.dataset.ty) || 0; this.hasMoved=false; this.el.style.zIndex = 9999; this.el.style.transition = 'transform 0.12s ease, box-shadow 0.12s ease'; this.el.style.transform = `translate3d(${this.startTx}px,${this.startTy}px,0) rotateZ(${this.el.dataset.rot}) scale(1.03)`; this.el.style.boxShadow = '1px 30px 60px rgba(0,0,0,0.48)'; tapTone();
        // start long press for secret
        this.longPressTimer = setTimeout(()=>{ this.showSecret(); }, 700);
      }
      move(e){ if(!this.isDown || e.pointerId !== this.pointerId) return; e.preventDefault(); const dx = e.clientX - this.startX; const dy = e.clientY - this.startY; const tx = this.startTx + dx; const ty = this.startTy + dy; this.el.dataset.tx = tx; this.el.dataset.ty = ty; // small rotation based on dx
        const rotVal = parseFloat(this.el.dataset.rot) || 0; const rot = Math.max(-28, Math.min(28, rotVal + dx*0.03)); this.el.style.transform = `translate3d(${tx}px,${ty}px,0) rotateZ(${rot}deg)`; this.hasMoved = true; // spawn some hearts for trail
        spawnHeart(e.clientX, e.clientY);
      }
      up(e){ if(this.longPressTimer){ clearTimeout(this.longPressTimer); this.longPressTimer = null; }
        if(!this.isDown) return; this.isDown=false; try{ if(this.el.hasPointerCapture && this.el.hasPointerCapture(e.pointerId)) this.el.releasePointerCapture(e.pointerId); }catch(err){}
        // settle
        const tx = parseFloat(this.el.dataset.tx) || 0; const ty = parseFloat(this.el.dataset.ty) || 0; const rot = this.el.dataset.rot; this.el.style.transition = 'transform 0.6s cubic-bezier(.22,.9,.31,1), box-shadow 0.5s ease'; this.el.style.transform = `translate3d(${tx}px,${ty}px,0) rotateZ(${rot})`; this.el.style.boxShadow = '1px 15px 20px rgba(0,0,0,0.45)';
        // check final trigger: if this is lastPaper and moved sufficiently -> final
        if(this.el.id === 'lastPaper' && this.hasMoved){ const dist = Math.hypot(tx,ty); if(dist > 40) triggerFinal(); }
      }
      showSecret(){ const s = this.el.querySelector('.secretText'); if(!s) return; s.textContent = s.dataset.text || ''; s.classList.add('show'); tapTone(); for(let i=0;i<6;i++) spawnHeart(parseFloat(this.el.dataset.initLeft) + this.el.offsetWidth/2 + (Math.random()-0.5)*120, parseFloat(this.el.dataset.initTop) + this.el.offsetHeight/2 + (Math.random()-0.5)*40); setTimeout(()=> s.classList.remove('show'), 3600); }
    }

    // initialize draggers
    const draggers = papers.map(p=> new Dragger(p));

    // spawn hearts helper
    function spawnHeart(x,y){ particles.push({x,y,vx:(Math.random()-0.5)*0.8,vy:-1.4+Math.random()*-0.4,life:110,size:6+Math.random()*6,alpha:1}); }

    // listen global pointerdown to spawn small hearts
    document.addEventListener('pointerdown', (e)=>{ for(let i=0;i<1+Math.floor(Math.random()*2);i++){ spawnHeart(e.clientX + (Math.random()-0.5)*12, e.clientY + (Math.random()-0.5)*12); } tapTone(); });

    // final overlay logic
    const finalOverlay = document.getElementById('finalOverlay');
    const goBackBtn = document.getElementById('goBackBtn');
    let finalShown = false;

    function triggerFinal(){ if(finalShown) return; finalShown = true; // float papers up and fade
      papers.forEach((p, idx)=>{ setTimeout(()=>{ p.style.transition = 'transform 1.6s ease, opacity 1.6s ease'; const extraX = (Math.random()-0.5)*200; p.style.transform += ` translate3d(${extraX}px, -${250 + Math.random()*180}px, 0) rotateZ(${Math.random()*160-80}deg)`; p.style.opacity = '0'; }, idx*110); });
      // after float, show overlay
      setTimeout(()=>{ finalOverlay.classList.add('show'); // spawn central hearts
        const cx = innerWidth/2, cy = innerHeight/2; for(let i=0;i<40;i++){ setTimeout(()=> spawnHeart(cx + (Math.random()-0.5)*260, cy + (Math.random()-0.5)*140), i*50); }
      }, 1200);
    }

    goBackBtn.addEventListener('click', ()=>{
      finalOverlay.classList.remove('show'); finalShown = false; // bring papers back to original positions and reset translations
      papers.forEach((p, idx)=>{ p.style.transition = 'transform 0.9s cubic-bezier(.22,.9,.31,1), opacity 0.9s ease'; p.style.opacity = '1'; p.dataset.tx = 0; p.dataset.ty = 0; const rot = p.dataset.rot || '0deg'; p.style.transform = `translate3d(0px,0px,0) rotateZ(${rot})`; // ensure left/top remain
      });
      // small pop of hearts
      for(let i=0;i<8;i++){ setTimeout(()=> spawnHeart(innerWidth/2 + (Math.random()-0.5)*120, innerHeight/2 + (Math.random()-0.5)*80), i*40); }
    });

    // helper: on load ensure everything placed nicely (images might shift sizes)
    window.addEventListener('load', ()=>{ placePapers(); });

    // expose simple test: double click last paper to trigger
    const lastP = document.getElementById('lastPaper'); lastP.addEventListener('dblclick', ()=> triggerFinal());

  </script>
</body>
</html>
